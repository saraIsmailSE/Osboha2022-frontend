"use strict";(self["webpackChunkOsboha180"]=self["webpackChunkOsboha180"]||[]).push([[3152],{94268:function(t,e,s){var a=s(24150);class r{constructor(){this.prefix="audit-marks"}async groupAuditMarks(t){try{const e=await a.hi.get(`${this.prefix}/group-audit-marks/${t}`).catch((t=>{t.response?(0,a.LO)(t.response.status):t.request?console.log(t.request):console.log("Error",t.message)}));return e.data.data}catch(e){return e}}async markForAudit(t){try{const e=await a.hi.get(`${this.prefix}/mark-for-audit/${t}`).catch((t=>{t.response?(0,a.LO)(t.response.status):t.request?console.log(t.request):console.log("Error",t.message)}));return e.data.data}catch(e){return e}}async updateMarkForAuditStatus(t,e){try{const s=a.hi.patch(`${this.prefix}/update-mark-for-audit-status/${e}`,{status:t}).catch((t=>{t.response?(0,a.LO)(t.response.status):t.request?console.log(t.request):console.log("Error",t.message)}));return s.data.data}catch(s){return s}}async addNote(t){try{const e=await a.hi.post(`/${this.prefix}/add-note`,t,{headers:{"Content-type":"multipart/form-data"}}).catch((t=>{t.response?(0,a.LO)(t.response.status):t.request?console.log(t.request):console.log("Error",t.message)}));return e.data.data}catch(e){return e}}async groupsAudit(t){try{const e=await a.hi.get(`/${this.prefix}/groups-audit/${t}`).catch((t=>{t.response?(0,a.LO)(t.response.status):t.request?console.log(t.request):console.log("Error",t.message)}));return e.data.data}catch(e){return e}}async supervisorsAudit(t){try{const e=await a.hi.get(`/${this.prefix}/supervisors-audit/${t}`).catch((t=>{t.response?(0,a.LO)(t.response.status):t.request?console.log(t.request):console.log("Error",t.message)}));return e.data.data}catch(e){return e}}}e["Z"]=new r},18450:function(t,e,s){s.r(e),s.d(e,{default:function(){return G}});var a=s(66252),r=s(3577);const o={class:"col-sm-12 mt-3"},i={class:"iq-card-header-toolbar d-flex align-items-center mx-auto"},d={key:0,class:"text-center mt-3 mb-3",style:{direction:"rtl"}},n={class:"text-center"},c={class:"iq-card-body p-3"},u={class:"d-flex align-items-center mt-3"},l={class:"d-flex align-items-center mt-3 row"},m={key:0,class:"text-center mb-3"},p={key:0,class:"alert alert-primary mt-2"},_={class:"d-flex align-items-center mt-3 row"},h={class:"d-inline-block w-100 text-center col-12"},b=(0,a._)("span",null,"عودة",-1),g=(0,a._)("span",{class:"align-middle material-symbols-outlined"}," keyboard_return ",-1),k=[b,g];function w(t,e,s,b,g,w){const y=(0,a.up)("AchievementCard"),v=(0,a.up)("Check"),f=(0,a.up)("count-down"),x=(0,a.up)("Note"),q=(0,a.up)("iq-card");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",o,[(0,a.Wm)(q,{class:"iq-card"},{default:(0,a.w5)((()=>[(0,a._)("div",i,[g.mark&&g.week?((0,a.wg)(),(0,a.iD)("h3",d,(0,r.zw)(g.mark.user.name)+" - الأسبوع "+(0,r.zw)(g.week.title),1)):(0,a.kq)("",!0)]),(0,a._)("div",n,[g.mark_for_audit?((0,a.wg)(),(0,a.iD)("span",{key:0,class:(0,r.C_)(`ms-2 rounded badge text-white ${w.statusClass(g.mark_for_audit.status)}`)},(0,r.zw)(g.audit_status[g.mark_for_audit.status]),3)):(0,a.kq)("",!0)]),(0,a._)("div",c,[g.mark?((0,a.wg)(),(0,a.j4)(y,{key:0,mark:g.mark,group:g.group},null,8,["mark","group"])):(0,a.kq)("",!0),(0,a._)("div",u,[(0,a.Wm)(v,{theses:g.theses},null,8,["theses"])]),(0,a._)("div",l,[g.expired?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",m,[(0,a._)("button",{class:"btn btn-primary ms-1 me-1",onClick:e[0]||(e[0]=t=>w.updateStatus("acceptable"))},"مقبول"),(0,a._)("button",{class:"btn btn-danger ms-1 me-1",onClick:e[1]||(e[1]=t=>w.updateStatus("unacceptable"))},"مرفوض"),g.msg?((0,a.wg)(),(0,a.iD)("div",p,(0,r.zw)(g.msg),1)):(0,a.kq)("",!0)])),g.week?((0,a.wg)(),(0,a.j4)(f,{key:1,week:g.week,timer_type:"audit_timer"},null,8,["week"])):(0,a.kq)("",!0),g.mark_for_audit?((0,a.wg)(),(0,a.j4)(x,{key:2,notes:g.mark_for_audit.audit_notes,to:g.mark_for_audit.mark.user.parent_id},null,8,["notes","to"])):(0,a.kq)("",!0),(0,a._)("div",_,[(0,a._)("div",h,[(0,a._)("a",{role:"button",onClick:e[2]||(e[2]=e=>t.$router.go(-1)),class:"d-block mt-3 mb-3 w-75 mx-auto"},k)])])])])])),_:1})])])}var y=s(63521),v=s(18331),f=s(91323),x=s(49963);const q=t=>((0,a.dD)("data-v-edb62c00"),t=t(),(0,a.Cn)(),t),$={class:"col-12"},A={class:"card"},C=q((()=>(0,a._)("div",{class:"card-header",style:{background:"#cae0cd"}},[(0,a._)("h4",{class:"card-title"}," ملاحظات حول الانجاز ")],-1))),D={class:"card-content"},F={class:"card-body"},Z={class:"row rounded-lg overflow-hidden shadow"},O={class:"col-12 px-0"},M=q((()=>(0,a._)("div",{class:"px-4 py-5 chat-box bg-white"},[(0,a._)("div",{class:"media w-auto mb-3",dir:"ltr"},[(0,a._)("img",{src:"https://bootstrapious.com/i/snippets/sn-chat/avatar.svg",alt:"user",width:"50",class:"rounded-circle"}),(0,a._)("div",{class:"media-body ml-3"},[(0,a._)("div",{class:"bg-recipient rounded py-2 px-3 mb-2"},[(0,a._)("p",{class:"text-small mb-0 text-muted"},"Test which is a new approach all solutions")]),(0,a._)("p",{class:"small text-muted"},"12:00 PM | Aug 13")])]),(0,a._)("div",{class:"media w-auto ml-auto mb-3"},[(0,a._)("div",{class:"media-body"},[(0,a._)("div",{class:"bg-sender rounded py-2 px-3 mb-2"},[(0,a._)("p",{class:"text-small mb-0 text-muted"},"Apollo University, Delhi, India Test")]),(0,a._)("p",{class:"small text-muted"},"12:00 PM | Aug 13")])]),(0,a._)("div",{class:"media w-auto mb-3",dir:"ltr"},[(0,a._)("img",{src:"https://bootstrapious.com/i/snippets/sn-chat/avatar.svg",alt:"user",width:"50",class:"rounded-circle"}),(0,a._)("div",{class:"media-body ml-3"},[(0,a._)("div",{class:"bg-recipient rounded py-2 px-3 mb-2"},[(0,a._)("p",{class:"text-small mb-0 text-muted"},"Test which is a new approach all solutions")]),(0,a._)("p",{class:"small text-muted"},"12:00 PM | Aug 13")])]),(0,a._)("div",{class:"media w-auto ml-auto mb-3"},[(0,a._)("div",{class:"media-body"},[(0,a._)("div",{class:"bg-sender rounded py-2 px-3 mb-2"},[(0,a._)("p",{class:"text-small mb-0 text-muted"},"Apollo University, Delhi, India Test")]),(0,a._)("p",{class:"small text-muted"},"12:00 PM | Aug 13")])])],-1))),N={action:"#",class:"mt-2"},E={class:"input-group"},L=q((()=>(0,a._)("div",{class:"input-group-append m-auto"},[(0,a._)("button",{id:"button-addon2",type:"submit",class:"btn btn-link"},[(0,a._)("span",{class:"display-5 text-dark material-symbols-outlined"}," send ")])],-1)));function j(t,e,s,r,o,i){const d=(0,a.up)("iq-card");return(0,a.wg)(),(0,a.j4)(d,{"body-class":"p-0"},{body:(0,a.w5)((()=>[(0,a._)("div",$,[(0,a._)("div",A,[C,(0,a._)("div",D,[(0,a._)("div",F,[(0,a._)("div",Z,[(0,a._)("div",O,[M,(0,a._)("form",N,[(0,a._)("div",E,[L,(0,a.wy)((0,a._)("input",{type:"text",placeholder:"اكتب ملاحظة","aria-describedby":"button-addon2",class:"border-bottom form-control rounded-0 border-0 py-4","onUpdate:modelValue":e[0]||(e[0]=t=>r.v$.noteForm.body.$model=t)},null,512),[[x.nr,r.v$.noteForm.body.$model]])])])])])])])])])])),_:1})}var P=s(54028),S=s(62587),z=s(94268),T={name:"Audit Notes",setup(){return{v$:(0,P.ZP)()}},props:{notes:{type:[Object],required:!0},to:{type:[Number],required:!0}},data(){return{noteForm:{body:"",mark_for_audit_id:0}}},validations(){return{noteForm:{body:{required:S.C1}}}},methods:{async submitNote(){if(this.v$.$touch(),!this.v$.noteForm.$invalid){this.message="",this.loader=!0;try{const t=await z.Z.addNote(this.noteForm);this.loader=!1,this.message=t,this.v$.noteForm.$reset()}catch(t){console.log(t)}}}}},I=s(83744);const U=(0,I.Z)(T,[["render",j],["__scopeId","data-v-edb62c00"]]);var W=U,V={name:"Audit Mark",async created(){try{const t=await z.Z.markForAudit(this.$route.params.mark_for_audit);this.mark_for_audit=t.mark_for_audit,this.mark=t.mark_for_audit.mark,this.theses=t.theses.reduce(((t,e)=>{const s=t[e.book.name]||[];return s["title"]=e.book.name,s.push(e),t[e.book.name]=s,t}),{}),this.group=t.group,this.week=t.week,this.expired=new Date(this.week.audit_timer)-new Date<0}catch(t){console.log(t)}},components:{Check:v.Z,AchievementCard:y.Z,CountDown:f.Z,Note:W},data(){return{theses:[],group:null,week:null,expired:!0,mark:null,mark_for_audit:null,audit_status:{acceptable:"مقبول",unacceptable:"مرفوض",not_audited:"لم يتم تدقيقه"},msg:""}},methods:{statusClass(t){switch(t){case"acceptable":return"bg-primary";case"unacceptable":return"bg-danger";default:return"bg-dark"}},async updateStatus(t){await z.Z.updateMarkForAuditStatus(t,this.$route.params.mark_for_audit);this.mark_for_audit.status=t,this.msg="تم التدقيق"}}};const B=(0,I.Z)(V,[["render",w]]);var G=B}}]);
//# sourceMappingURL=3152.ef270fee.js.map